(this.webpackJsonpapplication=this.webpackJsonpapplication||[]).push([[0],{109:function(e,t,a){},110:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(9),c=a.n(o),l=(a(83),a(10)),i=a(44),s=a(23),u=a(158),m=a(174),d=a(163),p=a(165),b=a(113),f=a(166),h=a(167),g=a(168),v=a(170),E=a(173),j=a(169),O=a(175),y=a(171),x=a(164),w=a(160),k=a(159),C=a(161),N=a(111),M=a(65),S=a.n(M);function T(){return r.a.createElement(N.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",(new Date).getFullYear(),".")}var I=Object(u.a)((function(e){return{icon:{marginRight:e.spacing(2)},main:{minHeight:"calc(100vh - 70px)"},logo:{maxHeight:32,marginRight:e.spacing(2)},footer:{position:"fixed",bottom:0,width:"100vw",backgroundColor:e.palette.background.paper,padding:e.spacing(2,2)}}}));function L(e){var t=e.children,a=I();return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,null),r.a.createElement(w.a,{position:"relative"},r.a.createElement(C.a,null,r.a.createElement("img",{src:S.a,alt:"WRM Logo",className:a.logo}),r.a.createElement(N.a,{variant:"h6",color:"inherit",noWrap:!0},"WRM Network"))),r.a.createElement("main",{className:a.main},t),r.a.createElement("footer",{className:a.footer},r.a.createElement(N.a,{variant:"h6",align:"center",gutterBottom:!0},"Footer"),r.a.createElement(T,null)))}var A=a(50),z=a(162),H=a(67),P=a.n(H),R=a(52),D=a.n(R),F=a(68),_=a(69),B=a.n(_),U=function(e,t){switch(t.type){case"FETCH_INIT":return Object(s.a)(Object(s.a)({},e),{},{isLoading:!0,isError:!1});case"FETCH_SUCCESS":return Object(s.a)(Object(s.a)({},e),{},{isLoading:!1,isError:!1,data:t.payload});case"FETCH_FAILURE":return Object(s.a)(Object(s.a)({},e),{},{isLoading:!1,isError:!0});default:throw new Error}},W=function(e,t){var a=Object(n.useState)(e),r=Object(l.a)(a,2),o=r[0],c=r[1],i=Object(n.useReducer)(U,{isLoading:!1,isError:!1,data:t}),s=Object(l.a)(i,2),u=s[0],m=s[1];return Object(n.useEffect)((function(){var e=!1;return function(){var t=Object(F.a)(D.a.mark((function t(){var a;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return m({type:"FETCH_INIT"}),t.prev=1,t.next=4,B()(o);case 4:a=t.sent,e||m({type:"FETCH_SUCCESS",payload:a.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e||m({type:"FETCH_FAILURE"});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(){return t.apply(this,arguments)}}()(),function(){e=!0}}),[o]),[u,c]},J=[{name:"Degree",value:"k"},{name:"In Degree",value:"ik"},{name:"Out Degree",value:"ok"},{name:"PageRank",value:"p"}],V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.map((function(e){return e.lat})),a=e.map((function(e){return e.lng})),n=e.map((function(e){return e.id})),r=e.map((function(e){return e.name}));return[{type:"scattermapbox",lat:t,lon:a,ids:n,mode:"markers",marker:{size:14,color:"blue"},hoverinfo:"text",text:r}]},X=[[0,"rgb(0, 0, 200)"],[.25,"rgb(0, 25, 255)"],[.375,"rgb(0, 152, 255)"],[.5,"rgb(44, 255, 150)"],[.625,"rgb(151, 255, 0)"],[.75,"rgb(255, 234, 0)"],[.875,"rgb(255, 111, 0)"],[1,"rgb(255, 0, 0)"]],Y=function(){var e=W("nodes_list.json",{}),t=Object(l.a)(e,2),a=t[0],n=a.data,r=a.isLoading,o=a.isError,c=(t[1],W("paths_reduced-e10.json",{})),i=Object(l.a)(c,2),s=i[0],u=s.data,m=s.isLoading,d=s.isError;i[1];return[{nodes:{list:V(Object.values(n)),obj:n},paths:{obj:u}},r||m,o||d]},$=function(e){var t=e.initialTime,a=void 0===t?0:t,r=e.interval,o=void 0===r?2e3:r,c=e.step,i=void 0===c?1:c,s=e.timerType,u=void 0===s?"INCREMENTAL":s,m=e.endTime,d=e.onTimeOver,p=Object(n.useState)(a),b=Object(l.a)(p,2),f=b[0],h=b[1],g=Object(n.useState)(!1),v=Object(l.a)(g,2),E=v[0],j=v[1],O=Object(n.useState)(!1),y=Object(l.a)(O,2),x=y[0],w=y[1],k=Object(n.useCallback)((function(e){j(!1),w(!1),h(e||a)}),[a]),C=Object(n.useCallback)((function(e){x&&k(),e&&k(e),j(!0)}),[k,x]),N=Object(n.useCallback)((function(){j(!1)}),[]);return Object(n.useEffect)((function(){E&&f===m&&(j(!1),w(!0),"function"===typeof d&&d())}),[m,d,f,E]),Object(n.useEffect)((function(){var e=null;return E?e=setInterval((function(){h((function(e){return"DECREMENTAL"===u?e-i:e+i}))}),o):e&&clearInterval(e),function(){e&&clearInterval(e)}}),[E,i,u,o]),{isRunning:E,pause:N,reset:k,start:C,time:f}},q=Object(u.a)((function(e){return{overlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vw",paddingTop:"25%",backgroundColor:"rgba(0,0,0,0.5)",display:"flex",flexDirection:"column",alignItems:"center",color:"white"}}})),G={dragmode:"zoom",mapbox:{style:"open-street-map",center:{lat:51.11,lon:17.03},margin:{r:0,t:0,b:0,l:0},zoom:11},autosize:!0,showlegend:!1,updatemenus:[{buttons:[{method:"update",args:["play"],label:"Play"},{method:"update",args:["pause"],label:"Pause"}],name:"action",direction:"left",pad:{t:10},showactive:!0,type:"buttons",x:0,xanchor:"left",y:1.1,yanchor:"top"},{buttons:[{args:[3,31],label:"March",method:"update"},{args:[4,30],label:"April",method:"update"},{args:[5,31],label:"May",method:"update"},{args:[6,30],label:"June",method:"update"},{args:[7,31],label:"July",method:"update"},{args:[8,31],label:"August",method:"update"},{args:[9,30],label:"September",method:"update"},{args:[10,31],label:"October",method:"update"},{args:[11,30],label:"November",method:"update"},{args:[12,31],label:"December",method:"update"}],name:"month",direction:"down",pad:{t:10},showactive:!0,type:"dropdown",x:0,xanchor:"left",y:1.15,yanchor:"top",active:1,font:{color:"#5072a8"}}],sliders:[{pad:{t:10,b:10},x:.15,y:1.11,len:.85,currentvalue:{visible:!1,xanchor:"right",prefix:"Hour: ",font:{color:"#888",size:20}},active:0,name:"Hour",steps:Array(96).fill(0).map((function(e,t){return{label:"".concat(Math.floor(15*t/60),":").concat(15*t%60===0?"00":15*t%60),args:[t],method:"update"}}))}]},K=function(e){var t=e.showNodes,a=void 0===t||t,o=e.showPaths,c=void 0===o||o,i=e.nodeMetric,s=void 0===i?"k":i,u=e.maxNumOfPaths,m=void 0===u?50:u,d=e.useTrend,p=void 0!==d&&d,b=q(),f=Object(n.useState)([]),h=Object(l.a)(f,2),g=h[0],v=h[1],E=Object(n.useState)(0),j=Object(l.a)(E,2),O=j[0],y=j[1],x=Object(n.useState)(1),w=Object(l.a)(x,2),k=w[0],C=w[1],N=Object(n.useState)({num:4,days:30}),M=Object(l.a)(N,2),S=M[0],T=M[1],I=Y(),L=Object(l.a)(I,3),H=L[0],R=H.nodes,D=H.paths,F=L[1],_=(L[2],W("".concat(S.num,"-paths.json"),{})),B=Object(l.a)(_,2),U=B[0],V=U.data,K=U.isLoading,Q=B[1],Z=W("".concat(S.num,"-metrics.json"),{}),ee=Object(l.a)(Z,2),te=ee[0],ae=te.data,ne=te.isLoading,re=ee[1],oe=$({endTime:96,initialTime:O}),ce=oe.time,le=oe.start,ie=oe.pause,se=oe.reset;oe.isRunning;G.title={text:"Time: ".concat(Math.floor(Number(15*ce/60)),":").concat(15*ce%60||"00"),font:{color:"#666",size:36},x:.05,y:.98},G.sliders[0].active=ce,G.sliders[1]={pad:{t:5,b:10},x:.15,y:1.22,len:.85,currentvalue:{visible:!0,xanchor:"right",prefix:"Day: ",font:{color:"#888",size:12}},active:k-1,name:"Day",steps:Array(S.days).fill(0).map((function(e,t){return{label:t+1,args:[t+1],method:"update"}}))},Object(n.useEffect)((function(){null!=V&&null!=V[1]&&null!=ae&&null!=ae[1]?v(Array(96).fill(0).map((function(e,t){return[].concat(Object(A.a)((a?R.list:[]).map(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"k",a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;return function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:"scattermapbox",lat:o.lat,lon:o.lon,ids:o.ids,mode:"markers",marker:{size:o.ids.map((function(a){var n=e.find((function(e){return e.o===a}));if(null==n)return 4;var r="p"===t?Math.max((56+7*Math.ceil(Math.log2(n[t])))/3,1):n[t];return 8*Math.ceil(Math.log2(r))})),color:o.ids.map((function(o){var c=e.find((function(e){return e.o===o}));if(null==c)return"blue";var l="p"===t?Math.max((72+9*Math.ceil(Math.log2(c[t])))/3,0):c[t];return a?2*(l-[c,n.find((function(e){return e.o===o}))||c,r.find((function(e){return e.o===o}))||c].reduce((function(e,a,n,r){return e+="p"===t?Math.max((72+9*Math.ceil(Math.log2(a.p)))/3,0)/r.length:a[t]/r.length}),0))+5:l})),colorscale:X,cmin:0,cmax:15,opacity:.8},hoverinfo:"text",hoverlabel:{bgcolor:"rgb(255, 234, 0)"},hovertext:o.ids.map((function(t){var a=e.find((function(e){return e.o===t}));return null==a?'<span style="font-size: 14px"><b>Name:</b> '.concat(o.text[t],"</span> <br><b>Metrics:</b> UNAVAILABLE"):'<span style="font-size: 14px"><b>Name:</b> '.concat(o.text[t],"</span> <br><b>Metrics:</b><br>").concat(J.map((function(e){return"".concat(e.name,": ").concat(a[e.value],"<br>")})).join(""))}))}}}(ae[k][15*t]||[],s,p,ae[k][15*t-15]||[],ae[k][15*t-30]||[]))),Object(A.a)((c&&V[k][15*t]||[]).map(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e["".concat(a.o,"-").concat(a.d)];return{type:"scattermapbox",lat:null==n?[]:n.lng,lon:null==n?[]:n.lat,mode:"lines",line:{width:2*a.c,color:"rgba(255,0,0,0.5)"},id:null==n?[]:n.id,hoverinfo:"text",hovertext:null==n?"unknown":'<span style="font-size: 18px">"'.concat(t[a.o].name,'" <b>&#8658;</b> "').concat(t[a.d].name,'"</span> <br>Bicycles on path: ').concat(a.c)}}}(D.obj,R.obj)).slice(0,m)))}))):v(Array(96).fill(0).map((function(e,t){return Object(A.a)(R.list)})))}),[F,K,ne,k,a,c,s,m,p]),Object(n.useEffect)((function(){96===ce&&k<S.days&&(G.sliders[0].active=1,C(k+1),le(1))}),[ce,k]);var ue=g[ce]||[];return r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{data:ue,layout:G,frames:Array(g.length).fill(0).map((function(e,t){return{name:t}})),onButtonClicked:function(e){var t=e.menu.name,a=e.button.args;if("month"===t)y(0),se(0),T({num:a[0],days:a[1]}),C(1),Q("".concat(a[0],"-paths.json")),re("".concat(a[0],"-metrics.json"));else switch(a[0]){case"play":le();break;case"pause":ie();break;default:console.log(a[0])}},onSliderChange:function(e){var t=e.slider.name,a=e.step.args;"Hour"===t&&(y(a[0]),se(a[0])),"Day"===t&&(C(a[0]),y(0),se(0))},useResizeHandler:!0,style:{width:"100%",minHeight:"calc(100vh - 70px)"}}),F&&r.a.createElement("div",{className:b.overlay},r.a.createElement(z.a,{color:"secondary",size:80,thickness:4}),r.a.createElement("h1",null,"Network data is loading... Please wait :)")))},Q=(a(109),Object(u.a)((function(e){return{toolbarIcon:Object(s.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),drawerPaper:{position:"absolute",height:"calc(100% - 64px)",marginTop:"64px",whiteSpace:"nowrap",width:280,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(i.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(6)},e.breakpoints.up("sm"),{width:e.spacing(9)}),menuContainer:{paddingTop:e.spacing(2),display:"flex",flexDirection:"column"},formElement:{marginTop:e.spacing(2)}}}))),Z=[{name:20,value:20},{name:50,value:50},{name:80,value:80},{name:100,value:100},{name:150,value:150},{name:300,value:300}];var ee=function(){var e=Q(),t=r.a.useState(!1),a=Object(l.a)(t,2),n=a[0],o=a[1],c=r.a.useState(!1),i=Object(l.a)(c,2),s=i[0],u=i[1],w=r.a.useState(!0),k=Object(l.a)(w,2),C=k[0],N=k[1],M=r.a.useState(!0),S=Object(l.a)(M,2),T=S[0],I=S[1],A=r.a.useState(J[0].value),z=Object(l.a)(A,2),H=z[0],P=z[1],R=r.a.useState(50),D=Object(l.a)(R,2),F=D[0],_=D[1];return r.a.createElement(L,null,r.a.createElement(m.a,{variant:"permanent",classes:{paper:e.drawerPaper+" "+(n?"":e.drawerPaperClose)},open:n},r.a.createElement("div",{className:e.toolbarIcon},n&&r.a.createElement(d.a,{onClick:function(){o(!1)}},"\u276e"),!n&&r.a.createElement(d.a,{onClick:function(){o(!0)}},"\u276f")),r.a.createElement(x.a,null),n&&r.a.createElement(p.a,{className:e.menuContainer},r.a.createElement(f.a,{component:"fieldset"},r.a.createElement(b.a,{component:"legend"},"Display Option"),r.a.createElement(h.a,null,r.a.createElement(g.a,{control:r.a.createElement(E.a,{checked:C,onChange:function(e){N(e.target.checked)},name:"nodes"}),label:"Show Nodes?"}),r.a.createElement(g.a,{control:r.a.createElement(E.a,{checked:T,onChange:function(e){I(e.target.checked)},name:"paths"}),label:"Show Paths?"}))),r.a.createElement(f.a,{className:e.formElement},r.a.createElement(j.a,{id:"nodeMetric-label"},"Node Metric"),r.a.createElement(y.a,{labelId:"nodeMetric-label",id:"nodeMetric",value:H,onChange:function(e){P(e.target.value)}},J.map((function(e){return r.a.createElement(O.a,{key:e.value,value:e.value},e.name)})))),r.a.createElement(f.a,{className:e.formElement},r.a.createElement(j.a,{id:"numOfNodes-label"},"Max num. of paths"),r.a.createElement(y.a,{labelId:"numOfNodes-label",id:"numOfNodes",value:F,onChange:function(e){_(e.target.value)}},Z.map((function(e){return r.a.createElement(O.a,{key:e.value,value:e.value},e.name)}))),r.a.createElement(v.a,null,"Be careful it might affect performance")),r.a.createElement(f.a,{className:e.formElement},r.a.createElement(h.a,null,r.a.createElement(g.a,{control:r.a.createElement(E.a,{checked:s,onChange:function(e){u(e.target.checked)},name:"useTrend"}),label:"Calculate Trend?"}))))),r.a.createElement(K,{showNodes:C,showPaths:T,nodeMetric:H,maxNumOfPaths:F,useTrend:s}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ee,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},65:function(e,t,a){e.exports=a.p+"static/media/logo.559ba900.svg"},78:function(e,t,a){e.exports=a(110)},83:function(e,t,a){}},[[78,1,2]]]);
//# sourceMappingURL=main.64f9149b.chunk.js.map