(this.webpackJsonpapplication=this.webpackJsonpapplication||[]).push([[0],{116:function(e,a,t){},117:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(9),c=t.n(o),i=(t(90),t(10)),l=t(45),s=t(23),u=t(161),m=t(178),d=t(167),p=t(168),b=t(121),g=t(169),f=t(170),h=t(171),v=t(173),E=t(177),j=t(172),y=t(179),O=t(174),x=t(165),w=t(163),k=t(162),C=t(164),N=t(166),M=t(118),S=t(175),T=t(68),I=t.n(T);function L(){return r.a.createElement(M.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",(new Date).getFullYear(),".")}var z=Object(u.a)((function(e){return{icon:{marginRight:e.spacing(2)},main:{minHeight:"calc(100vh - 70px)"},logo:{maxHeight:32,marginRight:e.spacing(2)},footer:{position:"fixed",bottom:0,width:"100vw",backgroundColor:e.palette.background.paper,padding:e.spacing(2,2)},currentUsageLabel:{marginLeft:e.spacing(2),marginRight:e.spacing(2),backgroundColor:"rgba(255,255,255,0.3)"}}}));function A(e){var a=e.children,t=e.usage,n=t.rent,o=t.percentage,c=z();return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,null),r.a.createElement(w.a,{position:"relative"},r.a.createElement(C.a,null,r.a.createElement("img",{src:I.a,alt:"WRM Logo",className:c.logo}),r.a.createElement(M.a,{variant:"h6",color:"inherit",noWrap:!0},"WRM Network"),r.a.createElement("div",{style:{display:"flex",flex:1}}),r.a.createElement(M.a,{variant:"h5",color:"inherit",noWrap:!0},"Total bikes in rent: ",n),r.a.createElement(x.a,{orientation:"vertical",flexItem:!0,className:c.currentUsageLabel}),r.a.createElement(M.a,{variant:"h5",color:"inherit",noWrap:!0},"Current Usage"),r.a.createElement(S.a,{position:"relative",display:"inline-flex"},r.a.createElement(N.a,{variant:"static",value:o,color:"secondary",size:60,thickness:8}),r.a.createElement(S.a,{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},r.a.createElement(M.a,{variant:"button",component:"div",color:"inherit"},"".concat(o,"%")))))),r.a.createElement("main",{className:c.main},a),r.a.createElement("footer",{className:c.footer},r.a.createElement(L,null)))}var R=t(53),H=t(69),P=t.n(H),D=t(55),F=t.n(D),U=t(70),_=t(71),W=t.n(_),B=function(e,a){switch(a.type){case"FETCH_INIT":return Object(s.a)(Object(s.a)({},e),{},{isLoading:!0,isError:!1});case"FETCH_SUCCESS":return Object(s.a)(Object(s.a)({},e),{},{isLoading:!1,isError:!1,data:a.payload});case"FETCH_FAILURE":return Object(s.a)(Object(s.a)({},e),{},{isLoading:!1,isError:!0});default:throw new Error}},J=function(e,a){var t=Object(n.useState)(e),r=Object(i.a)(t,2),o=r[0],c=r[1],l=Object(n.useReducer)(B,{isLoading:!1,isError:!1,data:a}),s=Object(i.a)(l,2),u=s[0],m=s[1];return Object(n.useEffect)((function(){var e=!1;return function(){var a=Object(U.a)(F.a.mark((function a(){var t;return F.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return m({type:"FETCH_INIT"}),a.prev=1,a.next=4,W()(o);case 4:t=a.sent,e||m({type:"FETCH_SUCCESS",payload:t.data}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),e||m({type:"FETCH_FAILURE"});case 11:case"end":return a.stop()}}),a,null,[[1,8]])})));return function(){return a.apply(this,arguments)}}()(),function(){e=!0}}),[o]),[u,c]},V=[{name:"Degree",value:"k"},{name:"In Degree",value:"ik"},{name:"Out Degree",value:"ok"},{name:"PageRank",value:"p"}],X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.map((function(e){return e.lat})),t=e.map((function(e){return e.lng})),n=e.map((function(e){return e.id})),r=e.map((function(e){return e.name}));return[{type:"scattermapbox",lat:a,lon:t,ids:n,mode:"markers",marker:{size:14,color:"blue"},hoverinfo:"text",text:r}]},Y=[[0,"rgb(0, 0, 200)"],[.25,"rgb(0, 25, 255)"],[.375,"rgb(0, 152, 255)"],[.5,"rgb(44, 255, 150)"],[.625,"rgb(151, 255, 0)"],[.75,"rgb(255, 234, 0)"],[.875,"rgb(255, 111, 0)"],[1,"rgb(255, 0, 0)"]],$=function(){var e=J("nodes_list.json",{}),a=Object(i.a)(e,2),t=a[0],n=t.data,r=t.isLoading,o=t.isError,c=(a[1],J("paths_reduced-e10.json",{})),l=Object(i.a)(c,2),s=l[0],u=s.data,m=s.isLoading,d=s.isError;l[1];return[{nodes:{list:X(Object.values(n)),obj:n},paths:{obj:u}},r||m,o||d]},q=function(e){var a=e.initialTime,t=void 0===a?0:a,r=e.interval,o=void 0===r?2e3:r,c=e.step,l=void 0===c?1:c,s=e.timerType,u=void 0===s?"INCREMENTAL":s,m=e.endTime,d=e.onTimeOver,p=Object(n.useState)(t),b=Object(i.a)(p,2),g=b[0],f=b[1],h=Object(n.useState)(!1),v=Object(i.a)(h,2),E=v[0],j=v[1],y=Object(n.useState)(!1),O=Object(i.a)(y,2),x=O[0],w=O[1],k=Object(n.useCallback)((function(e){j(!1),w(!1),f(e||t)}),[t]),C=Object(n.useCallback)((function(e){x&&k(),e&&k(e),j(!0)}),[k,x]),N=Object(n.useCallback)((function(){j(!1)}),[]);return Object(n.useEffect)((function(){E&&g===m&&(j(!1),w(!0),"function"===typeof d&&d())}),[m,d,g,E]),Object(n.useEffect)((function(){var e=null;return E?e=setInterval((function(){f((function(e){return"DECREMENTAL"===u?e-l:e+l}))}),o):e&&clearInterval(e),function(){e&&clearInterval(e)}}),[E,l,u,o]),{isRunning:E,pause:N,reset:k,start:C,time:g}},G=Object(u.a)((function(e){return{overlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vw",paddingTop:"25%",backgroundColor:"rgba(0,0,0,0.5)",display:"flex",flexDirection:"column",alignItems:"center",color:"white"}}})),K={dragmode:"zoom",mapbox:{style:"open-street-map",center:{lat:51.11,lon:17.03},margin:{r:0,t:0,b:0,l:0},zoom:11},autosize:!0,showlegend:!1,updatemenus:[{buttons:[{method:"update",args:["play"],label:"Play"},{method:"update",args:["pause"],label:"Pause"}],name:"action",direction:"left",pad:{t:10},showactive:!0,type:"buttons",x:0,xanchor:"left",y:1.1,yanchor:"top"},{buttons:[{args:[3,31],label:"March",method:"update"},{args:[4,30],label:"April",method:"update"},{args:[5,31],label:"May",method:"update"},{args:[6,30],label:"June",method:"update"},{args:[7,31],label:"July",method:"update"},{args:[8,31],label:"August",method:"update"},{args:[9,30],label:"September",method:"update"},{args:[10,31],label:"October",method:"update"},{args:[11,30],label:"November",method:"update"},{args:[12,31],label:"December",method:"update"}],name:"month",direction:"down",pad:{t:10},showactive:!0,type:"dropdown",x:0,xanchor:"left",y:1.15,yanchor:"top",active:1,font:{color:"#5072a8"}}],sliders:[{pad:{t:10,b:10},x:.15,y:1.11,len:.85,currentvalue:{visible:!1,xanchor:"right",prefix:"Hour: ",font:{color:"#888",size:20}},active:0,name:"Hour",steps:Array(96).fill(0).map((function(e,a){return{label:"".concat(Math.floor(15*a/60),":").concat(15*a%60===0?"00":15*a%60),args:[a],method:"update"}}))}]},Q=function(e){var a=e.showNodes,t=void 0===a||a,o=e.showPaths,c=void 0===o||o,l=e.nodeMetric,s=void 0===l?"k":l,u=e.maxNumOfPaths,m=void 0===u?50:u,d=e.useTrend,p=void 0!==d&&d,b=e.onUsageChange,g=void 0===b?function(){}:b,f=G(),h=Object(n.useState)([]),v=Object(i.a)(h,2),E=v[0],j=v[1],y=Object(n.useState)(0),O=Object(i.a)(y,2),x=O[0],w=O[1],k=Object(n.useState)(1),C=Object(i.a)(k,2),M=C[0],S=C[1],T=Object(n.useState)({num:4,days:30}),I=Object(i.a)(T,2),L=I[0],z=I[1],A=$(),H=Object(i.a)(A,3),D=H[0],F=D.nodes,U=D.paths,_=H[1],W=(H[2],J("".concat(L.num,"-paths.json"),{})),B=Object(i.a)(W,2),X=B[0],Q=X.data,Z=X.isLoading,ee=B[1],ae=J("".concat(L.num,"-metrics.json"),{}),te=Object(i.a)(ae,2),ne=te[0],re=ne.data,oe=ne.isLoading,ce=te[1],ie=J("".concat(L.num,"-usage.json"),{}),le=Object(i.a)(ie,2),se=le[0],ue=se.data,me=se.isLoading,de=le[1],pe=q({endTime:96,initialTime:x}),be=pe.time,ge=pe.start,fe=pe.pause,he=pe.reset;pe.isRunning;K.title={text:"Time: ".concat(Math.floor(Number(15*be/60)),":").concat(15*be%60||"00"),font:{color:"#666",size:36},x:.05,y:.98},K.sliders[0].active=be,K.sliders[1]={pad:{t:5,b:10},x:.15,y:1.22,len:.85,currentvalue:{visible:!0,xanchor:"right",prefix:"Day: ",font:{color:"#888",size:12}},active:M-1,name:"Day",steps:Array(L.days).fill(0).map((function(e,a){return{label:a+1,args:[a+1],method:"update"}}))},Object(n.useEffect)((function(){null!=Q&&null!=Q[1]&&null!=re&&null!=re[1]?j(Array(96).fill(0).map((function(e,a){return[].concat(Object(R.a)((t?F.list:[]).map(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"k",t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;return function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:"scattermapbox",lat:o.lat,lon:o.lon,ids:o.ids,mode:"markers",marker:{size:o.ids.map((function(t){var n=e.find((function(e){return e.o===t}));if(null==n)return 4;var r="p"===a?Math.max((56+7*Math.ceil(Math.log2(n[a])))/3,1):n[a];return 8*Math.ceil(Math.log2(r))})),color:o.ids.map((function(o){var c=e.find((function(e){return e.o===o}));if(null==c)return"blue";var i="p"===a?Math.max((72+9*Math.ceil(Math.log2(c[a])))/3,0):c[a];return t?2*(i-[c,n.find((function(e){return e.o===o}))||c,r.find((function(e){return e.o===o}))||c].reduce((function(e,t,n,r){return e+="p"===a?Math.max((72+9*Math.ceil(Math.log2(t.p)))/3,0)/r.length:t[a]/r.length}),0))+5:i})),colorscale:Y,cmin:0,cmax:15,opacity:.8},hoverinfo:"text",hoverlabel:{bgcolor:"rgb(255, 234, 0)"},hovertext:o.ids.map((function(a){var t=e.find((function(e){return e.o===a}));return null==t?'<span style="font-size: 14px"><b>Name:</b> '.concat(o.text[a],"</span> <br><b>Metrics:</b> UNAVAILABLE"):'<span style="font-size: 14px"><b>Name:</b> '.concat(o.text[a],"</span> <br><b>Metrics:</b><br>").concat(V.map((function(e){return"".concat(e.name,": ").concat(t[e.value],"<br>")})).join(""))}))}}}(re[M][15*a]||[],s,p,re[M][15*a-15]||[],re[M][15*a-30]||[]))),Object(R.a)((c&&Q[M][15*a]||[]).map(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e["".concat(t.o,"-").concat(t.d)];return{type:"scattermapbox",lat:null==n?[]:n.lng,lon:null==n?[]:n.lat,mode:"lines",line:{width:2*t.c,color:"rgba(255,0,0,0.5)"},id:null==n?[]:n.id,hoverinfo:"text",hovertext:null==n?"unknown":'<span style="font-size: 18px">"'.concat(a[t.o].name,'" <b>&#8658;</b> "').concat(a[t.d].name,'"</span> <br>Bicycles on path: ').concat(t.c)}}}(U.obj,F.obj)).slice(0,m)))}))):j(Array(96).fill(0).map((function(e,a){return Object(R.a)(F.list)})))}),[_,Z,oe,M,t,c,s,m,p]),Object(n.useEffect)((function(){if(96===be&&M<L.days&&(K.sliders[0].active=1,S(M+1),ge(1)),null!=ue&&null!=ue[1]){var e=ue[M][15*be];g({rent:e?e[0].bu:0,total:e?e[0].bt:0,percentage:e?Math.round(100*e[0].bp):0})}}),[be,M,me]);var ve=E[be]||[];return r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{data:ve,layout:K,frames:Array(E.length).fill(0).map((function(e,a){return{name:a}})),onButtonClicked:function(e){var a=e.menu.name,t=e.button.args;if("month"===a)w(0),he(0),z({num:t[0],days:t[1]}),S(1),ee("".concat(t[0],"-paths.json")),ce("".concat(t[0],"-metrics.json")),de("".concat(t[0],"-usage.json"));else switch(t[0]){case"play":ge();break;case"pause":fe();break;default:console.log(t[0])}},onSliderChange:function(e){var a=e.slider.name,t=e.step.args;"Hour"===a&&(w(t[0]),he(t[0])),"Day"===a&&(S(t[0]),w(0),he(0))},useResizeHandler:!0,style:{width:"100%",minHeight:"calc(100vh - 70px)"}}),_&&r.a.createElement("div",{className:f.overlay},r.a.createElement(N.a,{color:"secondary",size:80,thickness:4}),r.a.createElement("h1",null,"Network data is loading... Please wait :)")))},Z=(t(116),Object(u.a)((function(e){return{toolbarIcon:Object(s.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),drawerPaper:{position:"absolute",height:"calc(100% - 64px)",marginTop:"64px",whiteSpace:"nowrap",width:280,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(l.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(6)},e.breakpoints.up("sm"),{width:e.spacing(9)}),menuContainer:{paddingTop:e.spacing(2),display:"flex",flexDirection:"column"},formElement:{marginTop:e.spacing(2)}}}))),ee=[{name:20,value:20},{name:50,value:50},{name:80,value:80},{name:100,value:100},{name:150,value:150},{name:300,value:300}];var ae=function(){var e=Z(),a=r.a.useState(!1),t=Object(i.a)(a,2),n=t[0],o=t[1],c=r.a.useState(!1),l=Object(i.a)(c,2),s=l[0],u=l[1],w=r.a.useState(!0),k=Object(i.a)(w,2),C=k[0],N=k[1],M=r.a.useState(!0),S=Object(i.a)(M,2),T=S[0],I=S[1],L=r.a.useState(V[0].value),z=Object(i.a)(L,2),R=z[0],H=z[1],P=r.a.useState(50),D=Object(i.a)(P,2),F=D[0],U=D[1],_=r.a.useState({rent:0,total:null,percentage:0}),W=Object(i.a)(_,2),B=W[0],J=W[1];return r.a.createElement(A,{usage:B},r.a.createElement(m.a,{variant:"permanent",classes:{paper:e.drawerPaper+" "+(n?"":e.drawerPaperClose)},open:n},r.a.createElement("div",{className:e.toolbarIcon},n&&r.a.createElement(d.a,{onClick:function(){o(!1)}},"\u276e"),!n&&r.a.createElement(d.a,{onClick:function(){o(!0)}},"\u276f")),r.a.createElement(x.a,null),n&&r.a.createElement(p.a,{className:e.menuContainer},r.a.createElement(g.a,{component:"fieldset"},r.a.createElement(b.a,{component:"legend"},"Display Option"),r.a.createElement(f.a,null,r.a.createElement(h.a,{control:r.a.createElement(E.a,{checked:C,onChange:function(e){N(e.target.checked)},name:"nodes"}),label:"Show Nodes?"}),r.a.createElement(h.a,{control:r.a.createElement(E.a,{checked:T,onChange:function(e){I(e.target.checked)},name:"paths"}),label:"Show Paths?"}))),r.a.createElement(g.a,{className:e.formElement},r.a.createElement(j.a,{id:"nodeMetric-label"},"Node Metric"),r.a.createElement(O.a,{labelId:"nodeMetric-label",id:"nodeMetric",value:R,onChange:function(e){H(e.target.value)}},V.map((function(e){return r.a.createElement(y.a,{key:e.value,value:e.value},e.name)})))),r.a.createElement(g.a,{className:e.formElement},r.a.createElement(j.a,{id:"numOfNodes-label"},"Max num. of paths"),r.a.createElement(O.a,{labelId:"numOfNodes-label",id:"numOfNodes",value:F,onChange:function(e){U(e.target.value)}},ee.map((function(e){return r.a.createElement(y.a,{key:e.value,value:e.value},e.name)}))),r.a.createElement(v.a,null,"Be careful it might affect performance")),r.a.createElement(g.a,{className:e.formElement},r.a.createElement(f.a,null,r.a.createElement(h.a,{control:r.a.createElement(E.a,{checked:s,onChange:function(e){u(e.target.checked)},name:"useTrend"}),label:"Calculate Trend?"}))))),r.a.createElement(Q,{showNodes:C,showPaths:T,nodeMetric:R,maxNumOfPaths:F,useTrend:s,onUsageChange:J}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ae,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},68:function(e,a,t){e.exports=t.p+"static/media/logo.559ba900.svg"},85:function(e,a,t){e.exports=t(117)},90:function(e,a,t){}},[[85,1,2]]]);
//# sourceMappingURL=main.8513d79f.chunk.js.map