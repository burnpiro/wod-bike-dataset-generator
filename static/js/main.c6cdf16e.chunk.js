(this.webpackJsonpapplication=this.webpackJsonpapplication||[]).push([[0],{123:function(e,a,t){},124:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(11),l=t.n(o),c=(t(97),t(9)),i=t(46),u=t(23),s=t(166),m=t(184),d=t(175),b=t(176),p=t(128),f=t(172),g=t(177),v=t(178),h=t(179),E=t(183),j=t(173),y=t(185),O=t(180),x=t(170),C=t(168),w=t(167),k=t(169),M=t(171),N=t(125),S=t(181),T=t(72),I=t.n(T);function L(){return r.a.createElement(N.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",(new Date).getFullYear(),".")}var A=Object(s.a)((function(e){return{icon:{marginRight:e.spacing(2)},main:{minHeight:"calc(100vh - 80px)"},logo:{maxHeight:32,marginRight:e.spacing(2)},footer:{position:"fixed",bottom:0,width:"100vw",backgroundColor:e.palette.background.paper,padding:e.spacing(2,2)},currentUsageLabel:{marginLeft:e.spacing(2),marginRight:e.spacing(2),backgroundColor:"rgba(255,255,255,0.3)"}}}));function R(e){var a=e.children,t=e.usage,n=t.rent,o=t.percentage,l=A();return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,null),r.a.createElement(C.a,{position:"relative"},r.a.createElement(k.a,null,r.a.createElement("img",{src:I.a,alt:"WRM Logo",className:l.logo}),r.a.createElement(N.a,{variant:"h6",color:"inherit",noWrap:!0},"WRM Network"),r.a.createElement("div",{style:{display:"flex",flex:1}}),r.a.createElement(N.a,{variant:"h5",color:"inherit",noWrap:!0},"Total bikes in rent: ",n),r.a.createElement(x.a,{orientation:"vertical",flexItem:!0,className:l.currentUsageLabel}),r.a.createElement(N.a,{variant:"h5",color:"inherit",noWrap:!0},"Current Usage"),r.a.createElement(S.a,{position:"relative",display:"inline-flex"},r.a.createElement(M.a,{variant:"static",value:o,color:"secondary",size:60,thickness:8}),r.a.createElement(S.a,{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},r.a.createElement(N.a,{variant:"button",component:"div",color:"inherit"},"".concat(o,"%")))))),r.a.createElement("main",{className:l.main},a),r.a.createElement("footer",{className:l.footer},r.a.createElement(L,null)))}var D=t(54),P=t(73),F=t.n(P),H=t(57),z=t.n(H),U=t(74),W=t(75),_=t.n(W),B=function(e,a){switch(a.type){case"FETCH_INIT":return Object(u.a)(Object(u.a)({},e),{},{isLoading:!0,isError:!1});case"FETCH_SUCCESS":return Object(u.a)(Object(u.a)({},e),{},{isLoading:!1,isError:!1,data:a.payload});case"FETCH_FAILURE":return Object(u.a)(Object(u.a)({},e),{},{isLoading:!1,isError:!0});default:throw new Error}},J=function(e,a){var t=Object(n.useState)(e),r=Object(c.a)(t,2),o=r[0],l=r[1],i=Object(n.useReducer)(B,{isLoading:!1,isError:!1,data:a}),u=Object(c.a)(i,2),s=u[0],m=u[1];return Object(n.useEffect)((function(){var e=!1;return function(){var a=Object(U.a)(z.a.mark((function a(){var t;return z.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return m({type:"FETCH_INIT"}),a.prev=1,a.next=4,_()(o);case 4:t=a.sent,e||m({type:"FETCH_SUCCESS",payload:t.data}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),e||m({type:"FETCH_FAILURE"});case 11:case"end":return a.stop()}}),a,null,[[1,8]])})));return function(){return a.apply(this,arguments)}}()(),function(){e=!0}}),[o]),[s,l]},V=[{name:"Degree",value:"k"},{name:"In Degree",value:"ik"},{name:"Out Degree",value:"ok"},{name:"PageRank",value:"p"}],X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.map((function(e){return e.lat})),t=e.map((function(e){return e.lng})),n=e.map((function(e){return e.id})),r=e.map((function(e){return e.name}));return[{type:"scattermapbox",lat:a,lon:t,ids:n,mode:"markers",marker:{size:14,color:"blue"},hoverinfo:"text",text:r}]},Y=[[0,"rgb(0, 0, 200)"],[.25,"rgb(0, 25, 255)"],[.375,"rgb(0, 152, 255)"],[.5,"rgb(44, 255, 150)"],[.625,"rgb(151, 255, 0)"],[.75,"rgb(255, 234, 0)"],[.875,"rgb(255, 111, 0)"],[1,"rgb(255, 0, 0)"]],$=function(){var e=J("nodes_list.json",{}),a=Object(c.a)(e,2),t=a[0],n=t.data,r=t.isLoading,o=t.isError,l=(a[1],J("paths_reduced-e10.json",{})),i=Object(c.a)(l,2),u=i[0],s=u.data,m=u.isLoading,d=u.isError;i[1];return[{nodes:{list:X(Object.values(n)),obj:n},paths:{obj:s}},r||m,o||d]},q=function(e){var a=e.initialTime,t=void 0===a?0:a,r=e.interval,o=void 0===r?2e3:r,l=e.step,i=void 0===l?1:l,u=e.timerType,s=void 0===u?"INCREMENTAL":u,m=e.endTime,d=e.onTimeOver,b=Object(n.useState)(t),p=Object(c.a)(b,2),f=p[0],g=p[1],v=Object(n.useState)(!1),h=Object(c.a)(v,2),E=h[0],j=h[1],y=Object(n.useState)(!1),O=Object(c.a)(y,2),x=O[0],C=O[1],w=Object(n.useCallback)((function(e){j(!1),C(!1),g(e||t)}),[t]),k=Object(n.useCallback)((function(e){x&&w(),e&&w(e),j(!0)}),[w,x]),M=Object(n.useCallback)((function(){j(!1)}),[]);return Object(n.useEffect)((function(){E&&f===m&&(j(!1),C(!0),"function"===typeof d&&d())}),[m,d,f,E]),Object(n.useEffect)((function(){var e=null;return E?e=setInterval((function(){g((function(e){return"DECREMENTAL"===s?e-i:e+i}))}),o):e&&clearInterval(e),function(){e&&clearInterval(e)}}),[E,i,s,o]),{isRunning:E,pause:M,reset:w,start:k,time:f}},G=t(186),K=t(174),Q=t(129),Z=Object(s.a)((function(e){return{navigationContainer:{padding:e.spacing(0,8),marginTop:e.spacing(2),marginLeft:e.spacing(4),display:"flex",flexDirection:"row",justifyContent:"space-evenly"},sliders:{width:"90%"},buttons:{display:"flex",flexDirection:"column",marginRight:e.spacing(4)},formElement:{marginBottom:e.spacing(2)}}})),ee=[{value:[3,31],label:"March"},{value:[4,30],label:"April"},{value:[5,31],label:"May"},{value:[6,30],label:"June"},{value:[7,31],label:"July"},{value:[8,31],label:"August"},{value:[9,30],label:"September"},{value:[10,31],label:"October"},{value:[11,30],label:"November"},{value:[12,31],label:"December"}],ae=Array(24).fill(0).map((function(e,a){return{label:"".concat(a,":00"),value:4*a}})),te=function(e){return"".concat(Math.floor(15*e/60),":").concat(15*e%60===0?"00":15*e%60)};function ne(e){var a=e.onDayChange,t=e.onHourChange,o=e.onMonthChange,l=e.onAnimationChange,i=e.time,u=void 0===i?0:i,s=e.day,m=void 0===s?1:s,d=Z(),b=Object(n.useState)(4),p=Object(c.a)(b,2),g=p[0],v=p[1],h=Object(n.useState)(30),E=Object(c.a)(h,2),x=E[0],C=E[1],w=Array(x).fill(0).map((function(e,a){return{value:a+1,label:a+1}})),k="".concat(Math.floor(15*u/60),":").concat(15*u%60===0?"00":15*u%60);return r.a.createElement("div",{className:d.navigationContainer},r.a.createElement("div",{className:d.buttons},r.a.createElement(f.a,{className:d.formElement},r.a.createElement(j.a,{id:"nodeMetric-label"},"Month"),r.a.createElement(O.a,{labelId:"nodeMetric-label",id:"nodeMetric",value:g,onChange:function(e){var a=e.target.value,t=ee.find((function(e){return e.value[0]===a}));v(a),C(t.value[1]),o({num:a,days:t.value[1]})}},ee.map((function(e){return r.a.createElement(y.a,{key:e.label,value:e.value[0]},e.label)})))),r.a.createElement(K.a,{disableElevation:!0,variant:"contained",color:"primary"},r.a.createElement(Q.a,{onClick:function(){l("play")}},"Play"),r.a.createElement(Q.a,{onClick:function(){l("pause")}},"Pause"))),r.a.createElement("div",{className:d.sliders},r.a.createElement(N.a,{variant:"h5",color:"inherit",noWrap:!0},"Time: ",k,", ",m," ",ee[g-3].label," 2019"),r.a.createElement(G.a,{value:m,onChange:function(e,t){a(t)},defaultValue:1,min:1,max:x,"aria-labelledby":"discrete-slider-always",marks:w.splice(0,x),step:1}),r.a.createElement(G.a,{value:u,onChange:function(e,a){t(a)},defaultValue:0,min:0,max:95,getAriaValueText:te,valueLabelFormat:te,"aria-labelledby":"discrete-slider-always",step:1,marks:ae})))}var re=Object(s.a)((function(e){return{overlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vw",paddingTop:"25%",backgroundColor:"rgba(0,0,0,0.5)",display:"flex",flexDirection:"column",alignItems:"center",color:"white"}}})),oe={dragmode:"zoom",mapbox:{style:"open-street-map",center:{lat:51.11,lon:17.03},zoom:11},margin:{r:0,t:0,b:0,l:0},autoexpand:!0,autosize:!0,automargin:!0,showlegend:!1},le=function(e){var a=e.showNodes,t=void 0===a||a,o=e.showPaths,l=void 0===o||o,i=e.nodeMetric,u=void 0===i?"k":i,s=e.maxNumOfPaths,m=void 0===s?50:s,d=e.useTrend,b=void 0!==d&&d,p=e.onUsageChange,f=void 0===p?function(){}:p,g=re(),v=Object(n.useState)([]),h=Object(c.a)(v,2),E=h[0],j=h[1],y=Object(n.useState)(0),O=Object(c.a)(y,2),x=O[0],C=O[1],w=Object(n.useState)(1),k=Object(c.a)(w,2),N=k[0],S=k[1],T=Object(n.useState)({num:4,days:30}),I=Object(c.a)(T,2),L=I[0],A=I[1],R=$(),P=Object(c.a)(R,3),H=P[0],z=H.nodes,U=H.paths,W=P[1],_=(P[2],J("".concat(L.num,"-paths.json"),{})),B=Object(c.a)(_,2),X=B[0],G=X.data,K=X.isLoading,Q=B[1],Z=J("".concat(L.num,"-metrics.json"),{}),ee=Object(c.a)(Z,2),ae=ee[0],te=ae.data,le=ae.isLoading,ce=ee[1],ie=J("".concat(L.num,"-usage.json"),{}),ue=Object(c.a)(ie,2),se=ue[0],me=se.data,de=se.isLoading,be=ue[1],pe=q({endTime:96,initialTime:x}),fe=pe.time,ge=pe.start,ve=pe.pause,he=pe.reset;pe.isRunning;Object(n.useEffect)((function(){null!=G&&null!=G[1]&&null!=te&&null!=te[1]?j(Array(96).fill(0).map((function(e,a){return[].concat(Object(D.a)((t?z.list:[]).map(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"k",t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;return function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:"scattermapbox",lat:o.lat,lon:o.lon,ids:o.ids,mode:"markers",marker:{size:o.ids.map((function(t){var n=e.find((function(e){return e.o===t}));if(null==n)return 4;var r="p"===a?Math.max((56+7*Math.ceil(Math.log2(n[a])))/3,1):n[a];return 8*Math.ceil(Math.log2(r))})),color:o.ids.map((function(o){var l=e.find((function(e){return e.o===o}));if(null==l)return"blue";var c="p"===a?Math.max((72+9*Math.ceil(Math.log2(l[a])))/3,0):l[a];return t?2*(c-[l,n.find((function(e){return e.o===o}))||l,r.find((function(e){return e.o===o}))||l].reduce((function(e,t,n,r){return e+="p"===a?Math.max((72+9*Math.ceil(Math.log2(t.p)))/3,0)/r.length:t[a]/r.length}),0))+5:c})),colorscale:Y,cmin:0,cmax:15,opacity:.8},hoverinfo:"text",hoverlabel:{bgcolor:"rgb(255, 234, 0)"},hovertext:o.ids.map((function(a){var t=e.find((function(e){return e.o===a}));return null==t?'<span style="font-size: 14px"><b>Name:</b> '.concat(o.text[a],"</span> <br><b>Metrics:</b> UNAVAILABLE"):'<span style="font-size: 14px"><b>Name:</b> '.concat(o.text[a],"</span> <br><b>Metrics:</b><br>").concat(V.map((function(e){return"".concat(e.name,": ").concat(t[e.value],"<br>")})).join(""))}))}}}(te[N][15*a]||[],u,b,te[N][15*a-15]||[],te[N][15*a-30]||[]))),Object(D.a)((l&&G[N][15*a]||[]).map(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e["".concat(t.o,"-").concat(t.d)];return{type:"scattermapbox",lat:null==n?[]:n.lng,lon:null==n?[]:n.lat,mode:"lines",line:{width:2*t.c,color:"rgba(255,0,0,0.5)"},id:null==n?[]:n.id,hoverinfo:"text",hovertext:null==n?"unknown":'<span style="font-size: 18px">"'.concat(a[t.o].name,'" <b>&#8658;</b> "').concat(a[t.d].name,'"</span> <br>Bicycles on path: ').concat(t.c)}}}(U.obj,z.obj)).slice(0,m)))}))):j(Array(96).fill(0).map((function(e,a){return Object(D.a)(z.list)})))}),[W,K,le,N,t,l,u,m,b]),Object(n.useEffect)((function(){if(96===fe&&N<L.days&&(oe.sliders[0].active=1,S(N+1),ge(1)),null!=me&&null!=me[1]){var e=me[N][15*fe];f({rent:e?e[0].bu:0,total:e?e[0].bt:0,percentage:e?Math.round(100*e[0].bp):0})}}),[fe,N,de]);var Ee=E[fe]||[];return r.a.createElement(r.a.Fragment,null,r.a.createElement(ne,{onDayChange:function(e){S(e),C(0),he(0)},onHourChange:function(e){C(e),he(e)},onMonthChange:function(e){C(0),he(0),A({num:e.num,days:e.days}),S(1),Q("".concat(e.num,"-paths.json")),ce("".concat(e.num,"-metrics.json")),be("".concat(e.num,"-usage.json"))},onAnimationChange:function(e){switch(e){case"play":ge();break;case"pause":ve();break;default:console.log(e)}},day:N,time:fe}),r.a.createElement(F.a,{data:Ee,layout:oe,useResizeHandler:!0,style:{width:"100%",minHeight:"calc(100vh - 220px)"}}),W&&r.a.createElement("div",{className:g.overlay},r.a.createElement(M.a,{color:"secondary",size:80,thickness:4}),r.a.createElement("h1",null,"Network data is loading... Please wait :)")))},ce=(t(123),Object(s.a)((function(e){return{toolbarIcon:Object(u.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),drawerPaper:{position:"absolute",height:"calc(100% - 64px)",marginTop:"64px",whiteSpace:"nowrap",width:280,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(i.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(6)},e.breakpoints.up("sm"),{width:e.spacing(9)}),menuContainer:{paddingTop:e.spacing(2),display:"flex",flexDirection:"column"},formElement:{marginTop:e.spacing(2)}}}))),ie=[{name:20,value:20},{name:50,value:50},{name:80,value:80},{name:100,value:100},{name:150,value:150},{name:300,value:300}];var ue=function(){var e=ce(),a=r.a.useState(!1),t=Object(c.a)(a,2),n=t[0],o=t[1],l=r.a.useState(!1),i=Object(c.a)(l,2),u=i[0],s=i[1],C=r.a.useState(!0),w=Object(c.a)(C,2),k=w[0],M=w[1],N=r.a.useState(!0),S=Object(c.a)(N,2),T=S[0],I=S[1],L=r.a.useState(V[0].value),A=Object(c.a)(L,2),D=A[0],P=A[1],F=r.a.useState(50),H=Object(c.a)(F,2),z=H[0],U=H[1],W=r.a.useState({rent:0,total:null,percentage:0}),_=Object(c.a)(W,2),B=_[0],J=_[1];return r.a.createElement(R,{usage:B},r.a.createElement(m.a,{variant:"permanent",classes:{paper:e.drawerPaper+" "+(n?"":e.drawerPaperClose)},open:n},r.a.createElement("div",{className:e.toolbarIcon},n&&r.a.createElement(d.a,{onClick:function(){o(!1)}},"\u276e"),!n&&r.a.createElement(d.a,{onClick:function(){o(!0)}},"\u276f")),r.a.createElement(x.a,null),n&&r.a.createElement(b.a,{className:e.menuContainer},r.a.createElement(f.a,{component:"fieldset"},r.a.createElement(p.a,{component:"legend"},"Display Option"),r.a.createElement(g.a,null,r.a.createElement(v.a,{control:r.a.createElement(E.a,{checked:k,onChange:function(e){M(e.target.checked)},name:"nodes"}),label:"Show Nodes?"}),r.a.createElement(v.a,{control:r.a.createElement(E.a,{checked:T,onChange:function(e){I(e.target.checked)},name:"paths"}),label:"Show Paths?"}))),r.a.createElement(f.a,{className:e.formElement},r.a.createElement(j.a,{id:"nodeMetric-label"},"Node Metric"),r.a.createElement(O.a,{labelId:"nodeMetric-label",id:"nodeMetric",value:D,onChange:function(e){P(e.target.value)}},V.map((function(e){return r.a.createElement(y.a,{key:e.value,value:e.value},e.name)})))),r.a.createElement(f.a,{className:e.formElement},r.a.createElement(j.a,{id:"numOfNodes-label"},"Max num. of paths"),r.a.createElement(O.a,{labelId:"numOfNodes-label",id:"numOfNodes",value:z,onChange:function(e){U(e.target.value)}},ie.map((function(e){return r.a.createElement(y.a,{key:e.value,value:e.value},e.name)}))),r.a.createElement(h.a,null,"Be careful it might affect performance")),r.a.createElement(f.a,{className:e.formElement},r.a.createElement(g.a,null,r.a.createElement(v.a,{control:r.a.createElement(E.a,{checked:u,onChange:function(e){s(e.target.checked)},name:"useTrend"}),label:"Calculate Trend?"}))))),r.a.createElement(le,{showNodes:k,showPaths:T,nodeMetric:D,maxNumOfPaths:z,useTrend:u,onUsageChange:J}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ue,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},72:function(e,a,t){e.exports=t.p+"static/media/logo.559ba900.svg"},92:function(e,a,t){e.exports=t(124)},97:function(e,a,t){}},[[92,1,2]]]);
//# sourceMappingURL=main.c6cdf16e.chunk.js.map