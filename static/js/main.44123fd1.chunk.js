(this.webpackJsonpapplication=this.webpackJsonpapplication||[]).push([[0],{32:function(e,t,a){e.exports=a.p+"static/media/logo.559ba900.svg"},40:function(e,t,a){e.exports=a(73)},45:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(31),c=a.n(o),i=(a(45),a(97)),l=a(94),u=a(95),s=a(91),d=a(32),m=a.n(d),p=a(93);function b(){return r.a.createElement(s.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",(new Date).getFullYear(),".")}var f=Object(p.a)((function(e){return{icon:{marginRight:e.spacing(2)},main:{minHeight:"calc(100vh - 70px)"},logo:{maxHeight:32,marginRight:e.spacing(2)},footer:{position:"fixed",bottom:0,width:"100vw",backgroundColor:e.palette.background.paper,padding:e.spacing(2,2)}}}));function g(e){var t=e.children,a=f();return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a,null),r.a.createElement(i.a,{position:"relative"},r.a.createElement(u.a,null,r.a.createElement("img",{src:m.a,alt:"WRM Logo",className:a.logo}),r.a.createElement(s.a,{variant:"h6",color:"inherit",noWrap:!0},"WRM Network"))),r.a.createElement("main",{className:a.main},t),r.a.createElement("footer",{className:a.footer},r.a.createElement(s.a,{variant:"h6",align:"center",gutterBottom:!0},"Footer"),r.a.createElement(b,null)))}var h=a(20),v=a(3),j=a(96),y=a(34),E=a.n(y),O=a(21),x=a.n(O),w=a(35),k=a(11),C=a(36),S=a.n(C),T=function(e,t){switch(t.type){case"FETCH_INIT":return Object(k.a)(Object(k.a)({},e),{},{isLoading:!0,isError:!1});case"FETCH_SUCCESS":return Object(k.a)(Object(k.a)({},e),{},{isLoading:!1,isError:!1,data:t.payload});case"FETCH_FAILURE":return Object(k.a)(Object(k.a)({},e),{},{isLoading:!1,isError:!0});default:throw new Error}},H=function(e,t){var a=Object(n.useState)(e),r=Object(v.a)(a,2),o=r[0],c=r[1],i=Object(n.useReducer)(T,{isLoading:!1,isError:!1,data:t}),l=Object(v.a)(i,2),u=l[0],s=l[1];return Object(n.useEffect)((function(){var e=!1;return function(){var t=Object(w.a)(x.a.mark((function t(){var a;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s({type:"FETCH_INIT"}),t.prev=1,t.next=4,S()(o);case 4:a=t.sent,e||s({type:"FETCH_SUCCESS",payload:a.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e||s({type:"FETCH_FAILURE"});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(){return t.apply(this,arguments)}}()(),function(){e=!0}}),[o]),[u,c]},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.map((function(e){return e.lat})),a=e.map((function(e){return e.lng})),n=e.map((function(e){return e.id})),r=e.map((function(e){return e.name}));return[{type:"scattermapbox",lat:t,lon:a,ids:n,mode:"markers",marker:{size:14,color:"blue"},hoverinfo:"text",text:r}]},F=[[0,"rgb(0, 0, 200)"],[.25,"rgb(0, 25, 255)"],[.375,"rgb(0, 152, 255)"],[.5,"rgb(44, 255, 150)"],[.625,"rgb(151, 255, 0)"],[.75,"rgb(255, 234, 0)"],[.875,"rgb(255, 111, 0)"],[1,"rgb(255, 0, 0)"]],I=function(){var e=H("nodes_list.json",{}),t=Object(v.a)(e,2),a=t[0],n=a.data,r=a.isLoading,o=a.isError,c=(t[1],H("paths_reduced-e10.json",{})),i=Object(v.a)(c,2),l=i[0],u=l.data,s=l.isLoading,d=l.isError;i[1];return[{nodes:{list:L(Object.values(n)),obj:n},paths:{obj:u}},r||s,o||d]},N=function(e){var t=e.initialTime,a=void 0===t?0:t,r=e.interval,o=void 0===r?2e3:r,c=e.step,i=void 0===c?1:c,l=e.timerType,u=void 0===l?"INCREMENTAL":l,s=e.endTime,d=e.onTimeOver,m=Object(n.useState)(a),p=Object(v.a)(m,2),b=p[0],f=p[1],g=Object(n.useState)(!1),h=Object(v.a)(g,2),j=h[0],y=h[1],E=Object(n.useState)(!1),O=Object(v.a)(E,2),x=O[0],w=O[1],k=Object(n.useCallback)((function(e){y(!1),w(!1),f(e||a)}),[a]),C=Object(n.useCallback)((function(e){x&&k(),e&&k(e),y(!0)}),[k,x]),S=Object(n.useCallback)((function(){y(!1)}),[]);return Object(n.useEffect)((function(){j&&b===s&&(y(!1),w(!0),"function"===typeof d&&d())}),[s,d,b,j]),Object(n.useEffect)((function(){var e=null;return j?e=setInterval((function(){f((function(e){return"DECREMENTAL"===u?e-i:e+i}))}),o):e&&clearInterval(e),function(){e&&clearInterval(e)}}),[j,i,u,o]),{isRunning:j,pause:S,reset:k,start:C,time:b}},R=Object(p.a)((function(e){return{overlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vw",paddingTop:"25%",backgroundColor:"rgba(0,0,0,0.5)",display:"flex",flexDirection:"column",alignItems:"center",color:"white"}}})),A={dragmode:"zoom",mapbox:{style:"open-street-map",center:{lat:51.11,lon:17.03},margin:{r:0,t:0,b:0,l:0},zoom:11},autosize:!0,showlegend:!1,updatemenus:[{buttons:[{method:"update",args:["play"],label:"Play"},{method:"update",args:["pause"],label:"Pause"}],name:"action",direction:"left",pad:{t:10},showactive:!0,type:"buttons",x:0,xanchor:"left",y:1.1,yanchor:"top"},{buttons:[{args:[3,31],label:"March",method:"update"},{args:[4,30],label:"April",method:"update"},{args:[5,31],label:"May",method:"update"},{args:[6,30],label:"June",method:"update"},{args:[7,31],label:"July",method:"update"},{args:[8,31],label:"August",method:"update"},{args:[9,30],label:"September",method:"update"},{args:[10,31],label:"October",method:"update"},{args:[11,30],label:"November",method:"update"},{args:[12,31],label:"December",method:"update"}],name:"month",direction:"down",pad:{t:10},showactive:!0,type:"dropdown",x:0,xanchor:"left",y:1.15,yanchor:"top",active:1,font:{color:"#5072a8"}}],sliders:[{pad:{t:5,b:10},x:.15,y:1.11,len:.85,currentvalue:{visible:!0,xanchor:"right",prefix:"Hour: ",font:{color:"#888",size:20}},active:0,name:"Hour",steps:Array(96).fill(0).map((function(e,t){return{label:"".concat(Math.floor(15*t/60),":").concat(15*t%60===0?"00":15*t%60),args:[t],method:"update"}}))}]},M=function(){var e=R(),t=Object(n.useState)([]),a=Object(v.a)(t,2),o=a[0],c=a[1],i=Object(n.useState)(0),l=Object(v.a)(i,2),u=l[0],s=l[1],d=Object(n.useState)(1),m=Object(v.a)(d,2),p=m[0],b=m[1],f=Object(n.useState)({num:4,days:30}),g=Object(v.a)(f,2),y=g[0],O=g[1],x=I(),w=Object(v.a)(x,3),k=w[0],C=k.nodes,S=k.paths,T=w[1],L=(w[2],H("".concat(y.num,"-paths.json"),{})),M=Object(v.a)(L,2),z=M[0],_=z.data,D=z.isLoading,W=M[1],B=H("".concat(y.num,"-metrics.json"),{}),J=Object(v.a)(B,2),U=J[0],P=U.data,Y=U.isLoading,$=J[1],q=N({endTime:96,initialTime:u}),G=q.time,K=q.start,Q=q.pause,V=q.reset;q.isRunning;A.sliders[0].active=G,A.sliders[1]={pad:{t:5,b:10},x:.15,y:1.22,len:.85,currentvalue:{visible:!0,xanchor:"right",prefix:"Day: ",font:{color:"#888",size:12}},active:p-1,name:"Day",steps:Array(y.days).fill(0).map((function(e,t){return{label:t+1,args:[t+1],method:"update"}}))},Object(n.useEffect)((function(){null!=_&&null!=_[1]&&null!=P&&null!=P[1]?c(Array(96).fill(0).map((function(e,t){return[].concat(Object(h.a)(C.list.map(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:"scattermapbox",lat:t.lat,lon:t.lon,ids:t.ids,mode:"markers",marker:{size:t.ids.map((function(t){var a=e.find((function(e){return e.o===t}));return null==a?4:8*Math.ceil(Math.log2(a.k))})),color:t.ids.map((function(t){var a=e.find((function(e){return e.o===t}));return null==a?"blue":a.k})),colorscale:F,cmin:0,cmax:15,opacity:.8},hoverinfo:"text",text:t.text}}}(P[p][15*t]||[],15*t,p))),Object(h.a)((_[p][15*t]||[]).map(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e["".concat(a.o,"-").concat(a.d)];return{type:"scattermapbox",lat:null==n?[]:n.lng,lon:null==n?[]:n.lat,mode:"lines",line:{width:2*a.c,color:"rgba(255,0,0,0.5)"},id:null==n?[]:n.id,text:null==n?"unknown":'"'.concat(t[a.o].name,'" do "').concat(t[a.d].name,'" rowery: ').concat(a.c)}}}(S.obj,C.obj)).slice(0,80)))}))):c(Array(96).fill(0).map((function(e,t){return Object(h.a)(C.list)})))}),[T,D,Y,p]),Object(n.useEffect)((function(){96===G&&p<y.days&&(A.sliders[0].active=1,b(p+1),K(1))}),[G,p]);var X=o[G]||[];return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{data:X,layout:A,frames:Array(o.length).fill(0).map((function(e,t){return{name:t}})),onButtonClicked:function(e){var t=e.menu.name,a=e.button.args;if("month"===t)s(0),V(0),O({num:a[0],days:a[1]}),b(1),W("".concat(a[0],"-paths.json")),$("".concat(a[0],"-metrics.json"));else switch(a[0]){case"play":K();break;case"pause":Q();break;default:console.log(a[0])}},onSliderChange:function(e){var t=e.slider.name,a=e.step.args;"Hour"===t&&(s(a[0]),V(a[0])),"Day"===t&&(b(a[0]),s(0),V(0))},useResizeHandler:!0,style:{width:"100%",minHeight:"calc(100vh - 70px)"}}),T&&r.a.createElement("div",{className:e.overlay},r.a.createElement(j.a,{color:"secondary",size:80,thickness:4}),r.a.createElement("h1",null,"Network data is loading... Please wait :)")))};a(72);var z=function(){return r.a.createElement(g,null,r.a.createElement(M,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[40,1,2]]]);
//# sourceMappingURL=main.44123fd1.chunk.js.map